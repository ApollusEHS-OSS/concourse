== Introduction

This section describes the rationale
behind the opinionated pipeline. We go through each deployment
step and describe it in detail.

IMPORTANT: You do not need to use all the pieces of Cloud Pipelines. You
can (and should) gradually migrate your applications to use those pieces of
Cloud Pipelines that you think best suit your needs.

=== Five-second Introduction

// TODO: Write this

=== Five-minute Introduction

// TODO: Write this

==== How to Use It

// TODO: Write this

==== How It Works

As the following image shows, Cloud Pipelines contains logic to generate a
pipeline and the runtime to execute pipeline steps.

image::{intro-root-docs}/how.png[title="How Cloud Pipelines works"]

Once a pipeline is created (for example, by using the Jenkins Job DSL or from a Concourse
templated pipeline), when the jobs are ran, they clone or download Cloud Pipelines
code to run each step. Those steps run functions that are
defined in the `commons` module of Cloud Pipelines.

Cloud Pipelines performs steps to guess what kind of a project your
repository is (for example, JVM or PHP) and what framework it uses (Maven or Gradle), and it
can deploy your application to a cloud (Cloud Foundry or Kubernetes). You can read about how
it works by reading the <<how-do-the-scripts-work>> section.

All of that happens automatically if your application follows the conventions.
You can read about them in the <<project-opinions>> section.

==== Centralized Pipeline Creation

You can use Cloud Pipelines to generate pipelines
for all the projects in your system. You can scan all your
repositories (for example, you can call the Stash or Github API to retrieve the list of repositories)
and then call `fly` and set the pipeline for every repository.

TIP: We recommend using Cloud Pipelines this way.

==== A Pipeline for Each Repository

You can use Cloud Pipelines in such a way that
ach project contains its own pipeline steps,
and it is up to the project to set up the pipeline.

include::{scripts-base-url}/docs-sources/src/main/asciidoc/FLOW.adoc[]
